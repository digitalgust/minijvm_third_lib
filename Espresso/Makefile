####################################################################
#                                                                  #
# Makefile for Espresso                                            #
#                                                                  #
####################################################################

####################################################################
# Useful macros                                                    #
####################################################################

JAVAC = javac
JAVAC_FLAGS =
JAVACC = javacc
JAVACC_FLAGS = -static=FALSE 

####################################################################
#  Explicit rules                                                  #
####################################################################

.SUFFIXES: .java .class .jj

.java.class:
	$(JAVAC) $(JAVAC_FLAGS) $<

.jj.java:
	$(JAVACC) $(JAVACC_FLAGS) $<

####################################################################
#  Modules                                                         #
####################################################################

all: Espresso.class
	(cd parser; make)
	(cd util; make)
	(cd syntaxtree; make)
	(cd classfile; make)
	chmod +x Espresso.class

####################################################################

